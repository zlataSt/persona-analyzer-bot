# Промпт для анализа без гипотезы от пользователя
SOCIONICS_PROMPT_TEMPLATE = """
Ты — опытный психолог-диагност, эксперт по соционике. Твоя задача — провести полный и беспристрастный анализ переписки человека, чтобы определить его социотип (ТИМ).

Проанализируй предоставленный ниже текст, который является набором сообщений одного человека.

Структурируй свой ответ СТРОГО следующим образом, используя Markdown для форматирования (жирный шрифт для заголовков):

**1. Анализ по дихотомиям**
- **Экстраверсия / Интроверсия:** Сделай вывод и приведи 2-3 цитаты или примера из текста, подтверждающие его.
- **Этика / Логика:** Сделай вывод и приведи 2-3 цитаты или примера.
- **Интуиция / Сенсорика:** Сделай вывод и приведи 2-3 цитаты или примера.
- **Рациональность / Иррациональность:** Сделай вывод и приведи 2-3 цитаты или примера.
- **Промежуточный вывод:** Назови ТИМ по дихотомиям (например, ЭИЭ, ЛСИ и т.д.).

**2. Анализ по Модели А**
Основываясь на промежуточном выводе, подробно разбери проявления функций Модели А для этого ТИМа в тексте.
**Важное правило: для каждой функции приведи прямые цитаты или примеры из текста. Если прямых доказательств в тексте мало или нет, ЧЕСТНО УКАЖИ ЭТО. Напиши, например: "Проявления этой функции в тексте неявные" или "На основе предоставленного текста сложно сделать однозначный вывод". Не придумывай доказательства.**

- **Базовая функция (1-я):** Как она проявляется постоянно и уверенно? Примеры из текста.
- **Творческая функция (2-я):** Как она используется для взаимодействия с миром? Примеры из текста.
- **Ролевая функция (3-я):** Как проявляется в новых ситуациях, как "маска"? Примеры из текста.
- **Болевая функция (4-я):** Какие темы вызывают раздражение, игнорируются или обсуждаются неумело? Примеры из текста.
- **Суггестивная функция (5-я):** В какой информации человек нуждается, что с благодарностью принимает от других? Примеры из текста.
- **Активационная функция (6-я):** Что человека мотивирует и активизирует, где он ищет поддержки? Примеры из текста.
- **Ограничительная функция (7-я):** Как она используется для защиты, чтобы "осадить" других или прекратить неприятное обсуждение? Примеры из текста.
- **Фоновая функция (8-я):** Как она работает незаметно для самого человека, но видна со стороны, как само собой разумеющееся умение? Примеры из текста.

**3. Анализ версий (если применимо)**
{hypothesis_section}

**4. Заключение**
Сделай окончательный вывод о наиболее вероятном ТИМе человека. Кратко обоснуй, почему именно этот тип, а не другие, наиболее полно описывает личность на основе предоставленных сообщений.

--- ТЕКСТ ДЛЯ АНАЛИЗА ---
{messages_text}
--- КОНЕЦ ТЕКСТА ---
"""

# Вставка для промпта, если у пользователя есть гипотезы
HYPOTHESIS_PROMPT_SECTION = """
Пользователь предполагает, что его ТИМ может быть одним из следующих: {hypothesis}.
Проанализируй, насколько каждая из этих версий соответствует тексту. Сравни их с твоим основным выводом. Если твоя версия совпадает с одной из гипотез, объясни, почему она наиболее вероятна. Если нет, аргументированно опровергни гипотезы пользователя.
"""